<div class="primaryContainer bgContainer1">
    
    <div class="titleContainer">
        <h2 class="title text-center flex-1">Add fault</h2>
    </div>
    
    <form
        action="/fault"
        method="POST"
        enctype="multipart/form-data"
    >
        <input type="hidden" name="_csrf" value="<%= csrfToken %>" />

        <div>
            <label class="block text-neutral-100 font-semibold mb-2"
                >Date of the fault</label
            >
            <div class="relative">
                <input
                    class="w-full bg-neutral-700/50 border border-neutral-600/50 rounded-lg py-2 px-4 pl-10"
                    type="date"
                    name="doneDate"
                    required
                />
                <div
                    class="absolute inset-y-0 left-0 flex items-center pl-3 text-neutral-400"
                >
                    <i class="fas fa-calendar-day"></i>
                </div>
            </div>
        </div>

        <div>
            <label class="block text-neutral-100 font-semibold mb-2"
                >Fault description</label
            >
            <div class="relative">
                <input
                    class="w-full bg-neutral-700/50 border border-neutral-600/50 rounded-lg py-2 px-4 pl-10"
                    type="text"
                    name="reason"
                    placeholder="The employee didn´t finish his job on time"
                    required
                />
                <div
                    class="absolute inset-y-0 left-0 flex items-center pl-3 text-neutral-400"
                >
                    <i class="fas fa-exclamation-circle"></i>
                </div>
            </div>
        </div>

        <div>
            <label class="block text-neutral-100 font-semibold mb-2"
                >Employee´s e-mail</label
            >
            <div class="relative">
                <input
                    class="w-full bg-neutral-700/50 border border-neutral-600/50 rounded-lg py-2 px-4 pl-10"
                    type="email"
                    name="email"
                    placeholder="jonhDoe@nuclea.solutions"
                    required
                />
                <div
                    class="absolute inset-y-0 left-0 flex items-center pl-3 text-neutral-400"
                >
                    <i class="fas fa-envelope"></i>
                </div>
            </div>
        </div>

        <!-- Campo para subir archivos -->
        <div class="mb-6">
            <label class="block text-neutral-100 font-semibold mb-2">
                Evidence (optional):
            </label>
            <input
                id="faultEvidenceInput"
                class="w-full md:w-full p-2 bg-neutral-700/50 border border-neutral-600/50 rounded-lg"
                type="file"
                name="evidence"
                accept=".jpg, .png, .docx, .jpeg, .pdf"
            />
        </div>

        <div class="flex items-center justify-between">
            <button type="submit" class="btnPrimary">Submit</button>
        </div>
    </form>

    <script>
        const evidenceInput = document.getElementById("faultEvidenceInput");

        evidenceInput.addEventListener("change", function () {
            const file = this.files[0]; // Obtiene el archivo seleccionado
            const maxSize = 10 * 1024 * 1024; // 10MB en bytes

            if (file) {
                if (file.size > maxSize) {
                    alert(
                        `The file is too heavy, the maximun allowed is 10mb.`
                    );
                    this.value = ""; // Borra el archivo seleccionado
                }
            }
        });
    </script>
</div>