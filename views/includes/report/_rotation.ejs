<div class="container mx-auto p-4">
    <div class="bg-neutral-700/25 shadow rounded-lg overflow-hidden">
        <div class="px-6 py-4 flex justify-end">
            <a href="/reports" class="btnPrimary">Return</a>
        </div>
        <div class="flex justify-end">
            <p class="text-2xl font-bold">New Workers: <%= activeSize %></p>
        </div>
        <div class="flex justify-end">
            <p class="text-2xl font-bold">Fired Workers: <%= inactiveSize %></p>
        </div>

        <div class="p-6">
            <h2 class="text-2xl font-bold mb-4">New Workers</h2>
        </div>

        <table class="min-w-full divide-y divide-neutral-200">
            <thead class="bg-neutral-800/50">
                <tr>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        CURP
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        Full name
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        Role
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        Country
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        Work modality
                    </th>
                </tr>
            </thead>
            <tbody class="bg-neutral-800 divide-y divide-neutral-200">
                <% for (let dp of departments) { %> <% let usersInDepartment =
                activeUsers.filter(a => a.departamento == dp.title); %> <% if
                (usersInDepartment.length > 0) { %>
                <tr>
                    <td colspan="5" class="text-center text-xl font-semibold">
                        <%= dp.title %>
                    </td>
                </tr>

                <% usersInDepartment.forEach(a => { %>
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <%= a.curp %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <%= a.nombre %> <%= a.apellido %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <%= a.rol %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <%= a.pais %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <% if(a.workModality == 0) { %> In person <% } else
                        if(a.workModality == 1) { %> Remote <% } else { %>
                        Hybrid <% } %>
                    </td>
                </tr>
                <% }) %> <% } %> <% } %>
            </tbody>
        </table>

        <div class="p-6">
            <h2 class="text-2xl font-bold mb-4">Fired Workers</h2>
        </div>

        <table class="min-w-full divide-y divide-neutral-200">
            <thead class="bg-neutral-800/50">
                <tr>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        CURP
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        Full name
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        Role
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        Country
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                    >
                        Work modality
                    </th>
                </tr>
            </thead>
            <tbody class="bg-neutral-800 divide-y divide-neutral-200">
                <% for (let dp of departments) { %> <% let usersInDepartment =
                inactiveUsers.filter(i => i.departamento == dp.title); %> <% if
                (usersInDepartment.length > 0) { %>
                <tr>
                    <td
                        colspan="5"
                        class="text-center text-xl font-semibold text-neutral-100"
                    >
                        <%= dp.title %>
                    </td>
                </tr>

                <% usersInDepartment.forEach(i => { %>
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <%= i.curp %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <%= i.nombre %> <%= i.apellido %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <%= i.rol %>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <%= i.pais %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <% if(i.workModality == 0) { %> In person <% } else
                        if(i.workModality == 1) { %> Remote <% } else { %>
                        Hybrid <% } %>
                    </td>
                </tr>
                <% }) %> <% } %> <% } %>
            </tbody>
        </table>
    </div>
</div>

<script>

    {
        data: [
            <% for (let dato of data) { %>
                <%= dato %>,
            <% } %>
        ]
    }
</script>
