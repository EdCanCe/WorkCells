<div class="container mx-auto p-4">
    <div class="bg-white shadow rounded-lg overflow-hidden">
        <div class="px-6 py-4 flex justify-end">
            <a
                href="/reports"
                class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded"
                >Return</a
            >
        </div>
        <div class="flex justify-end">
            <p class="text-2xl font-bold">New Workers: <%= activeSize %></p>
        </div>
        <div class="flex justify-end">
            <p class="text-2xl font-bold">Fired Workers: <%= inactiveSize %></p>
        </div>

        <div class="p-6">
            <h2 class="text-2xl font-bold mb-4">New Workers</h2>
        </div>

        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        CURP
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        Full name
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        Role
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        Country
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        Work modality
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                <% for (let dp of departments) { %> <% let usersInDepartment =
                activeUsers.filter(a => a.departamento == dp.title); %> <% if
                (usersInDepartment.length > 0) { %>
                <tr>
                    <td
                        colspan="5"
                        class="text-center text-xl font-semibold text-gray-700"
                    >
                        <%= dp.title %>
                    </td>
                </tr>

                <% usersInDepartment.forEach(a => { %>
                <tr>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <%= a.curp %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <%= a.nombre %> <%= a.apellido %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <%= a.rol %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <%= a.pais %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <% if(a.workModality == 0) { %> In person <% } else
                        if(a.workModality == 1) { %> Remote <% } else { %>
                        Hybrid <% } %>
                    </td>
                </tr>
                <% }) %> <% } %> <% } %>
            </tbody>
        </table>

        <div class="p-6">
            <h2 class="text-2xl font-bold mb-4">Fired Workers</h2>
        </div>

        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        CURP
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        Full name
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        Role
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        Country
                    </th>
                    <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                        Work modality
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                <% for (let dp of departments) { %> <% let usersInDepartment =
                inactiveUsers.filter(i => i.departamento == dp.title); %> <% if
                (usersInDepartment.length > 0) { %>
                <tr>
                    <td
                        colspan="4"
                        class="text-center text-xl font-semibold text-gray-700"
                    >
                        <%= dp.title %>
                    </td>
                </tr>

                <% usersInDepartment.forEach(i => { %>
                <tr>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <%= i.curp %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <%= i.nombre %> <%= i.apellido %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <%= i.rol %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <%= i.pais %>
                    </td>
                    <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"
                    >
                        <% if(i.workModality == 0) { %> In person <% } else
                        if(i.workModality == 1) { %> Remote <% } else { %>
                        Hybrid <% } %>
                    </td>
                </tr>
                <% }) %> <% } %> <% } %>
            </tbody>
        </table>
    </div>
</div>
