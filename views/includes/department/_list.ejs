<div
    class="container mx-auto mt-6 pt-10 px-4 bg-neutral-700/25 shadow rounded-lg overflow-hidden mb-6"
>
    <!-- Título del departamento -->
    <h2 class="text-4xl font-bold mb-8 text-center">
        Department: <%= department[0].title %>
    </h2>

    <!-- Grid centrado de 3 tarjetas por fila -->
    <div
        class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 justify-items-center mb-8"
        id="employeesContainer"
    ></div>

    <div class="flex justify-center gap-3 mt-6 mb-4">
        <button id="prevPage" class="btnPrimary">Previous</button>
        <button id="nextPage" class="btnPrimary">Next</button>
    </div>
</div>

<script>
    let currentPage = 1;

    async function loadEmployees(page) {
        const response = await fetch(`/department/paginated?page=${page}`);
        const data = await response.json();

        let container = "";

        if (data.length === 0) {
            container += `<div class="w-full bg-neutral-800/50 rounded-2xl shadow-lg p-6 flex flex-col col-span-full text-center">
                There´s no more employees</div>`;
        } else {
            data.forEach((user) => {
                container += `<div class="w-full bg-neutral-800/50 rounded-2xl shadow-lg p-6 flex flex-col">
                    <h2 class="text-2xl font-semibold mb-4"> ${user.birthName} ${user.surname} </h2>`;

                container += `<p class="mb-2"><span class="font-medium">WorkModality:</span>`;
                if (user.workModality === 0) {
                    container += `Presencial`;
                } else if (user.workModality === 1) {
                    container += `Remote`;
                } else {
                    container += `Hybrid`;
                }

                container += `</p><p class="mb-2"><span class="font-medium">E-mail:</span>
                    ${user.mail} </p>`;

                container += `<p class="mb-0"> <span class="font-medium">Phone Number:</span>`;
                if (user.phoneNumber) {
                    container += `${user.phoneNumber}`;
                } else {
                    container += `N/A`;
                }
                container += `</p> <a href="department/employee/${user.userID}"
                    class="block bg-blue-500 px-2 py-2 rounded-xl w-full hover:bg-blue-600 transition mt-2 text-center">
                    Check</a> </div>`;
            });
        }
        document.getElementById("employeesContainer").innerHTML = container;
    }

    document.getElementById("prevPage").addEventListener("click", () => {
        if (currentPage > 1) {
            currentPage--;
            loadEmployees(currentPage);
        }
    });

    document.getElementById("nextPage").addEventListener("click", () => {
        currentPage++;
        loadEmployees(currentPage);
    });

    // Cargar la primera página al iniciar
    loadEmployees(currentPage);
</script>
