<div class="flex-1 p-6">
    <div class="max-w-7xl mx-auto">
        <div class="card bg-neutral-700/25 shadow-md rounded-lg p-4">
            <div class="card-content">
                <h1 class="text-3xl font-semibold mb-4">Change Password</h1>
                <% if (passwdFlag === 0) { %>
                    As your first time logging in, you must have to change your password to continue navigating.
                <% } %>
                <form id="form" action="/employee/me/changePassword" method="POST">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                    <div class="grid grid-cols-1 gap-6 mb-6">
                        <% if (passwdFlag === 1) { %>
                        <div class="field relative">
                            <label class="block text-lg font-medium">Current Password</label>
                            <input
                                type="password"
                                id="currentPassword"
                                name="currentPassword"
                                class="input bg-neutral-700/50 border border-neutral-600/50 p-3 pr-10 rounded-md w-full"
                                required
                            />
                            <button type="button" onclick="togglePassword('currentPassword', this)" class="absolute right-2 top-10 text-sm text-neutral-400 focus:outline-none">
                                Show
                            </button>
                            <div id="currentPasswordError" class="text-red-600 text-sm mt-2"></div>
                        </div>
                        <% } %>
                        <div class="field relative">
                            <label class="block text-lg font-medium">New Password</label>
                            <input
                                type="password"
                                id="newPassword"
                                name="newPassword"
                                class="input bg-neutral-700/50 border border-neutral-600/50 p-3 pr-10 rounded-md w-full"
                                required
                            />
                            <button type="button" onclick="togglePassword('newPassword', this)" class="absolute right-2 top-10 text-sm text-neutral-400 focus:outline-none">
                                Show
                            </button>
                            <div id="newPasswordError" class="text-red-600 text-sm mt-2"></div>
                        </div>
                        <div class="field relative">
                            <label class="block text-lg font-medium">Confirm New Password</label>
                            <input
                                type="password"
                                id="confirmNewPassword"
                                name="confirmNewPassword"
                                class="input bg-neutral-700/50 border border-neutral-600/50 p-3 pr-10 rounded-md w-full"
                                required
                            />
                            <button type="button" onclick="togglePassword('confirmNewPassword', this)" class="absolute right-2 top-10 text-sm text-neutral-400 focus:outline-none">
                                Show
                            </button>
                            <div id="confirmPasswordError" class="text-red-600 text-sm mt-2"></div>
                        </div>
                    </div>

                    <div class="flex justify-end">
                        <button type="submit" class="btnPrimary">
                            Change Password
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="/javascript/passwdValidator.js"></script>
<script>
    function togglePassword(inputId, btn) {
        const input = document.getElementById(inputId);
        if (input.type === "password") {
            input.type = "text";
            btn.textContent = "Hide";
        } else {
            input.type = "password";
            btn.textContent = "Show";
        }
    }
</script>
